<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="canopy_new.js"></script>
</head>
<body>
</body>
<script>
/*Canopy.initUserClient({
    "auth-username" : "gregp", 
    "auth-password" : "test1234",
    "http-port" : 80,
    "https-port" : 433,
    "use-http" : true,
    "skip-cert-check" : true,
    "host" : "dev02.canopy.link"
}).onDone(function(result, user) {
});
 */

/*var canopy = Canopy.initContext();
var remote = canopy.initRemote({
    "http_port" : 80,
    "https_port" : 433,
    "use_http" : true,
    "skip_cert_check" : true,
    "host" : "dev02.canopy.link"
});

remote.getSelfUser().onDone(function(result, data) {
    if (result != CANOPY_SUCCESS) {
        alert(result);
        return;
    }
    data.user.devices().count().onDone(function(result, data2) {
        console.log("Hello " + data.user.username());
        console.log(data2.count);
    });
});*/

Canopy.initDeviceClient({
    "auth_type" : "basic", /* Your Device's UUID */
    "auth_username" : "d036cc19-27bd-4437-8eaa-f1c7606a92bb", /* Your Device's UUID */
    "auth_password" : "b4qJlrixRlsolbaqz5siJhxXjNKeb8e/",     /* Your Devices' Secret Key */
    "host" : "dev02.canopy.link"
}).onDone(function(result, data) {
    if (result != CANOPY_SUCCESS) {
        alert(data.errorMsg);
        return;
    }
    alert("Hi " + data.device.name());
    data.device.name("Anchovy");
    data.device.syncWithRemote().onDone(function(result, data2) {
        if (result != CANOPY_SUCCESS) {
            alert(data2.errorMsg);
            return;
        }
        alert("You are now " + data.device.name());
    });
});
</script>
</html>
